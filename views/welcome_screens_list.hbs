<div class="container">
  <img class="current_image_vp" src="/images/cinq_background_without_logo.png"/>
  <div class="loader-wrapper">
    <span class="loader">
      <span class="loader-inner"></span>
    </span>
  </div>
  <div class="row ws-list-init animated bounceInLeft">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
      <nav>
        <div class="nav nav-tabs nav-fill border-shadow-nav" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active tab-title tab-tible-visitor-page" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Pages</a>
          <a class="nav-item nav-link tab-title tab-tible-video" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false" >Videos</a>
        </div>
      </nav>
        <div class="tab-content py-3 px-3 px-sm-0 border-shadow-list" id="nav-tabContent">
          <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <div id="ws_list" class="table-wrapper">
              <div class="table-title">
                <div class="row">
                  <div class="col-6 tab-title">
                    <h3>Visitor pages list</h3>
                  </div>
                  <div class="col-6 d-flex justify-content-end">
                    <button id="delete-all-image" type="button" class="btn btn-danger" onclick="deleteAllImages()">
                      <i class="fa fa-plus releway-font btn-add-page" data-toggle="tooltip" data-placement="top" title="Click here to delete the selected visitor pages">Delete &nbsp<i class="material-icons">delete</i></i>
                    </button>
                    <button id="disable-all-image" type="button" class="btn btn-cancel" onclick="disableAllImages()">
                      <i class="fa fa-plus releway-font btn-add-page" data-toggle="tooltip" data-placement="top" title="Click here to disable the selected visitor pages">Disable &nbsp<i class="material-icons">desktop_access_disabled</i></i>
                    </button>
                    <button id="add-new-image" type="button" class="btn btn-default" onclick="window.location.href='/new_welcome_screen_image'">
                      <i class="fa fa-plus releway-font btn-add-page" data-toggle="tooltip" data-placement="top" title="Click here to add a new visitor page">Add new visitor page &nbsp<i class="material-icons">add_photo_alternate</i></i>
                    </button>
                  </div>
                </div>
              </div>
              <table class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th class="text-center releway-font">Company</th>
                    <th class="text-center releway-font">Last update</th>
                    <th class="text-center releway-font">Is enable?</th>
                    <th class="text-center releway-font">Actions</th>
                    <th class="text-center releway-font">
                      <div class="page">
                        <div class="page__toggle">
                          <label class="toggle">
                            <input id="image_select_all" class="toggle__input" type="checkbox" onclick="selectAllImages(this)">
                            <span class="toggle__label">
                              <span class="toggle__text">Select</span>
                            </span>
                          </label>
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  {{#each images}}
                    <tr>
                      {{#showCompanies this.companies}}
                      {{/showCompanies}}
                      <td class="releway-font ellipsis">{{this.date}}</td>
                      {{#checkAvailability this}}
                      {{/checkAvailability}}
                      <td>
                        <a href="/edit_welcome_screen_image/{{this.id}}" class="edit" title="Edit this visitor page" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
                        <a class="deleteImage" title="Delete this visitor page" data-toggle="tooltip" onclick="DeleteImage('{{this.id}}');"><i class="material-icons delete-icon">&#xE872;</i></a>
                      </td>
                      <td>
                        <div class="page">
                          <div class="page__toggle">
                            <label class="toggle">
                              <input id="image_{{this.id}}" name="ws_image" class="toggle__input" type="checkbox">
                              <span class="toggle__label">
                                <span class="toggle__text"></span>
                              </span>
                            </label>
                          </div>
                        </div>
                      </td>
                    </tr>
                  {{/each}}
                </tbody>
              </table>
            </div>
          </div>
          <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
            <div id="ws_list" class="table-wrapper">
              <div class="table-title">
                <div class="row">
                  <div class="col-6 tab-title">
                    <h3>Videos list</h3>
                  </div>
                  <div class="col-6 d-flex justify-content-end">
                    <button id="delete-all-video" type="button" class="btn btn-danger" onclick="deleteAllVideos()">
                      <i class="fa fa-plus releway-font btn-add-page" data-toggle="tooltip" data-placement="top" title="Click here to delete the selected video">Delete &nbsp<i class="material-icons">delete</i></i>
                    </button>
                    <button id="disable-all-video" type="button" class="btn btn-cancel" onclick="disableAllVideos()">
                      <i class="fa fa-plus releway-font btn-add-page" data-toggle="tooltip" data-placement="top" title="Click here to disable the selected video">Disable &nbsp<i class="material-icons">desktop_access_disabled</i></i>
                    </button>
                    <button id="add-new-video" type="button" class="btn btn-default" onclick="window.location.href='/new_welcome_screen_video'">
                      <i class="fa fa-plus releway-font btn-add-page" data-toggle="tooltip" data-placement="top" title="Click here to add a new visitor page">Add new video &nbsp<i class="material-icons">video_call</i></i>
                    </button>
                  </div>
                </div>
              </div>
              <table class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th class="text-center releway-font">Title</th>
                    <th class="text-center releway-font">Last update</th>
                    <th class="text-center releway-font">Is enable?</th>
                    <th class="text-center releway-font">Actions</th>
                    <th class="text-center releway-font">
                      <div class="page">
                        <div class="page__toggle">
                          <label class="toggle">
                            <input id="video_select_all" class="toggle__input" type="checkbox" onclick="selectAllVideos(this)">
                            <span class="toggle__label">
                              <span class="toggle__text">Select</span>
                            </span>
                          </label>
                        </div>
                      </div>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  {{#showVideos videos isAdmin}}
                  {{/showVideos}}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>        

<script>
  var socket = io.connect("http://{{host}}:3000");
  socket.on('RefreshPage', function(data) {
    location.reload();
  });

  window.onload = function() {
    if (!window.location.hash) {
      window.location = window.location + '#loaded';
      window.location.reload();
    }

    getAllImagesCheckboxes();
    getAllVideosCheckboxes();
  }
</script>